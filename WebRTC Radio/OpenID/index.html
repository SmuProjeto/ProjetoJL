<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="description" content="WebRTC Radio" />
		<title>Welcome!</title>

		<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
		  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
		  <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
		<![endif]-->

		<link href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
	</head>
	<body>

		<div class="container">
			<h1>Welcome friend!</h1>
			<p>
				Use your radio! Enjoy :)
 			</p>
			<p>
				<!-- OpenID Connect Button - Step 3: add HTML element representing button -->
				<span id="signinButton">
					<span class="oidc-signin"
						data-callback="signinCallback"
						data-name="Facebook"
						data-logo="http://localhost"
						data-size="lg"
						data-server="https://api.learning-layers.eu/o/oauth2"
						data-clientid="e51787a0-8ffd-480a-a0c8-66a627fe6e24"
						data-scope="openid phone email address profile">
					</span>
				</span>
			</p>
			<h2 id="status"/>
		</div>

		<!-- OpenID Connect Button - Step 2: resolve dependencies to jQuery, bootstrap, jsjws and jsrsasign -->

		<!-- import jQuery for AJAX calls (must) -->
		<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.0.min.js"></script>

		<!-- import Bootstrap for responsive UI (must) -->
		<script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>

		<!-- import JWS and JSRSASIGN (must) -->
		<script type="text/javascript" src="./js/jsjws/jws-2.0.js"></script>
		<script type="text/javascript" src="./js/jsrsasign/ext/base64.js"></script>
		<script type="text/javascript" src="./js/jsrsasign/base64x-1.1.js"></script>
		<script type="text/javascript" src="./js/jsrsasign/ext/jsbn.js"></script>
		<script type="text/javascript" src="./js/jsrsasign/ext/jsbn2.js"></script>
		<script type="text/javascript" src="./js/jsrsasign/asn1hex-1.1.js"></script>
		<script type="text/javascript" src="./js/jsrsasign/crypto-1.1.js"></script>
		<script type="text/javascript" src="./js/jsrsasign/ext/rsa.js"></script>
		<script type="text/javascript" src="./js/jsrsasign/ext/rsa2.js"></script>
		<script type="text/javascript" src="./js/jsrsasign/rsapem-1.1.js"></script>
		<script type="text/javascript" src="./js/jsrsasign/rsasign-1.2.min.js"></script>
		<script type="text/javascript" src="./js/jsrsasign/x509-1.1.js"></script>
		<script type="text/javascript" src="./js/jsrsasign/crypto-1.1.js"></script>

		<script type="text/javascript">

			// OpenID Connect Button - Step 4: implement a callback function
			function signinCallback(result) {
				if(result === "success"){
					// at this point, developers have access to several pieces of information
					// relevant to OpenID Connect (see ./oidc-button.js)
					console.log("OpenID Connect Provider Configuration:");
					console.log(oidc_provider_config);
					console.log("OpenID Connect User Info:");
					console.log(oidc_userinfo);
					console.log("OpenID Connect ID Token:");
					console.log(oidc_idtoken);

					$("#status").html("Olá, " + oidc_userinfo.name + "!");
				} else {
					console.log("Não está conectado...");
					console.log(result);
					$("#status").html("E agora ?");
				}
			}

	  (function() {
	   var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
	   po.src = './oidc-button.js';
	   var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
	 })();
	</script>
</body>
</html>
